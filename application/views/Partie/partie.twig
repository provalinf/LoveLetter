{% extends "layout.twig" %}
{% block contenu %}

	<div class="container contain-background">
		<div class="row justify-content-md-center">
			<div class="col">
				<h1>Jeu {{ name }}</h1>
			</div>
		</div>
		<div class="row justify-content-md-center">
			<div class="col-">
				Cartes défaussées joueurs adverses
			</div>
		</div>
		<div class="row justify-content-md-center">
			<div class="col-">
				Cartes joueurs
			</div>
		</div>
		<div class="row justify-content-md-center">
			<div class="col">
				Pioche
			</div>
			<div class="col-">
				Main persistante
			</div>
			<div class="col">
				Carte à défausser
			</div>
		</div>

	</div>
{% endblock %}

{% block javascript %}
	<script content="javascript">
		var actualisationInterval = 2000;
		var intervals = [];

		function refreshTimeConnect() {
			$.getJSON("{{ base_url('Game_c/refreshTimeConnect') }}", function (result) {
				console.log("retour:" + result);
				if (!result) {
					alert('Une erreur est survenue');
					clearAllInterval();
				}
			});
			console.log("actualisation");

			$.getJSON("{{ base_url('Game_c/getNbJoueurs') }}", function (result) {
				console.log("retour:" + result);
				if (!result) {
					alert('Une erreur est survenue');
					clearAllInterval();
				}
			});
		}

		function clearAllInterval() {
			intervals.forEach(function (interval) {
				clearInterval(interval);
			});
		}

		function action(id_carte) {
			switch (id_carte) {
				case 1:
					//Garde

					break;
				case 2:
					//Pretre
					break;
				case 3:
					//Baron
					$.getJSON("{{ base_url('Game_c/getJoueurs/3') }}", function (result) {
						if (!result) {
							var tab = JSON.parse(result);
							var joueur_selected = xx; // popup qui propose les joueurs
							if (/*popup réponse */) {
								/*$.ajax({
									url: "{{ base_url('Game_c/joueurCompare') }}",
									type: 'POST',
									contentType: "application/json",
									dataType: 'json',
									data: JSON.stringify(joueur_selected),
									success: function(msg) {
										alert(msg);
										un tableau JSON qui contient les cartes du joueur
										var cartes_adversaire = JSON.parse(msg);
										console.log(cartes_adversaire);
									}
								});*/

								/*$.getJSON("{{ base_url('Game_c/joueurCompare/idjoueur') }}", function (res) {
									if (result) {
										alert(msg);
										un tableau JSON qui contient les cartes du joueur
										var cartes_adversaire = JSON.parse(msg);
										console.log(cartes_adversaire);
									}
								});*/
							}
						}
					});
					break;
				case 4:
					//Servante
					break;
				case 5:
					//Prince
					break;
				case 6:
					//Roi
					break;
				case 7:
					//Comtesse
					break;
				case 8:
					//Princesse

					break;
				default:
					console.log("Carte inexistante");
			}
		}

		$(document).ready(function () {
				intervals[0] = window.setInterval(refreshTimeConnect, actualisationInterval);
			}
		);
	</script>
{% endblock %}